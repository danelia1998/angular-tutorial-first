<h3>Cart</h3>

<button class="button" type="button" (click) = "clearAllCart()">
        Delete All
</button>

<p>
    <a routerLink="/shipping">Shipping Prices</a>
</p>

<div class="cart-item" *ngFor="let item of items">\
    <span>
        {{ item.name }}
    </span>
    <span>
        {{ item.price | currency }}
    </span>
    <button class="button" type="button" (click) = "clearOne(items.indexOf(item))">
            Delete One
    </button>
</div>

<form [formGroup]="checkoutForm" (ngSubmit)= "onSubmit(checkoutForm.value)">
    <div>
        <label>Name</label>
        <input type="text" required formControlName="name" >
    </div>
    <div formGroupName="address">
        <h3>Address</h3>
        
        <label>
            Street:
            <input type="text" formControlName="street">
        </label>
        <label>
            City:
            <input type="text" formControlName="city">
        </label>
        <label>
            State:
            <input type="text" formControlName="state">
        </label>
        <label>
            Zip Code:
            <input type="text" formControlName="zip">
        </label>

    </div>
    <button class="button" type="submit">Purchase</button>
    <p>
        <button class="button" type="button" (click) = "setDefault()">
            Reset Name
        </button>
    </p>
</form>

<div>
    <h3>
        Customer
    </h3>
    <p>
        Name: {{ name.value }}
    </p>
    <p>
        Address: {{ address.value | json }}
        City: {{city.value}}
        State: {{state.value}}
        Zip: {{zip.value}}
    </p>
    <p>
        Form Status {{ checkoutForm.status }}
    </p>
</div>

<div>
    <h3>Errors :</h3>
    <div *ngIf = "address.invalid && (address.dirty || address.touched)">
        <div *ngIf="!address.errors?.zipStatus">
            Zip lenght should be less than 3 !
        </div>
        <div *ngIf="!address.errors?.cityStatus">
            City name should start with A !
        </div>
    </div>
    <div *ngIf = "name.invalid && (name.dirty || name.touched)">
        <div *ngIf = "name.errors.required">
            Name Is Required !
        </div>
        <div *ngIf = "name.errors.minlength">
            Name must be at least 4 characters long !
        </div>
        <div *ngIf = "name.errors.forbiddenName?.invalid">
            Name can't be like an {{ name.value }}
        </div>
    </div>
</div>
